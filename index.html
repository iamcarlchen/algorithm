<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    <script>
      /**
       * @param {number[]} nums
       * @param {number} target
       * @return {number[]}
       */
      var twoSum = function (nums, target) {
        var len = nums.length;
        var h = {};
        h[nums[0]] = 0;

        for (var i = 1; i <= len - 1; i++) {
          if (typeof h[target - nums[i]] != "undefined") {
            return [h[target - nums[i]], i];
          }

          h[nums[i]] = i;
        }
      };

      console.log(twoSum([3, 2, 4], 6));

      function ListNode(val, next) {
        this.val = val === undefined ? 0 : val;
        this.next = next === undefined ? null : next;
      }

      /**
       * Definition for singly-linked list.
       *
       */
      /**
       * @param {ListNode} l1
       * @param {ListNode} l2
       * @return {ListNode}
       */
      var addTwoNumbers = function (l1, l2) {
        let head = null,
          tail = null;
        let carry = 0;
        while (l1 || l2) {
          const n1 = l1 ? l1.val : 0;
          const n2 = l2 ? l2.val : 0;
          const sum = n1 + n2 + carry;
          if (!head) {
            head = tail = new ListNode(sum % 10);
          } else {
            tail.next = new ListNode(sum % 10);
            tail = tail.next;
          }
          carry = Math.floor(sum / 10);
          if (l1) {
            l1 = l1.next;
          }
          if (l2) {
            l2 = l2.next;
          }
        }
        if (carry > 0) {
          tail.next = new ListNode(carry);
        }
        return head;
      };

      console.log(
        addTwoNumbers(
          new ListNode(2, new ListNode(4, new ListNode(3))),
          new ListNode(5, new ListNode(6, new ListNode(4)))
        )
      );

      /**
       * @param {string} s
       * @return {number}
       */
      var lengthOfLongestSubstring = function (s) {
        var len = s.length;
        var start = 0;
        var end = 0;
        var map = {};

        var maxLen = 0;
        if (len <= 1) {
          return len;
        }
        while (end <= len - 1) {
          if (typeof map[s[end]] == "undefined") {
            //没有重复字符
            map[s[end]] = end;
            maxLen = Math.max(end - start + 1, maxLen);
          } else {
            //有重复字符
            maxLen = Math.max(end - start, maxLen);

            var start2 = map[s[end]] + 1;
            var map2 = {};
            // 删除start和start2之间的字符
            for (var k in map) {
              if (map[k] >= start2) {
                map2[k] = map[k];
              }
            }
            map = map2;
            start = start2;

            map[s[end]] = end;
          }

          end++;
        }

        return maxLen;
      };
      //   console.log(lengthOfLongestSubstring("tmmzuxt"));
      //   console.log(lengthOfLongestSubstring("dvdf"));
      //   console.log(lengthOfLongestSubstring("au"));
      //   console.log(lengthOfLongestSubstring(" "));
      //   console.log(lengthOfLongestSubstring("abcabcbb"));
      //   console.log(lengthOfLongestSubstring("bbbbb"));
      //   console.log(lengthOfLongestSubstring("pwwkew"));

      /**
       * @param {number} x
       * @return {boolean}
       */
      var isPalindrome = function (x) {
        if (x < 0) {
          return false;
        }
        if (x < 10) {
          return true;
        }

        if (x % 10 == 0) {
          return false;
        }

        var revertNum = 0;
        while (x > revertNum) {
          //   debugger;
          revertNum = 10 * revertNum + (x % 10);
          x = parseInt(x / 10);

          console.log(x);
          console.log(revertNum);
        }

        return (
          x == revertNum || (revertNum >= 10 && parseInt(revertNum / 10) == x)
        );
      };
      console.log(isPalindrome(21120));

      /**
       * @param {string[]} strs
       * @return {string}
       */
      var longestCommonPrefix = function (strs) {
        debugger;
        var num = strs.length;
        if (num == 0) {
          return "";
        }
        if (num == 1) {
          return strs[0];
        }

        //寻找最短字符串的长度
        var minLength = -1;
        for (var i in strs) {
          if (minLength < 0) {
            minLength = strs[i].length;
          } else {
            minLength = Math.min(minLength, strs[i].length);
          }
        }

        //是否公共字符
        var isCommonPrefix = function (len) {
          var s = strs[0].substr(0, len);
          for (var i = 1; i < strs.length; i++) {
            if (strs[i].substr(0, len) != s) {
              return false;
            }
          }
          return true;
        };

        //二分法查找
        var low = 0;
        var hight = minLength;
        while (low < hight) {
          var tmp = parseInt((hight - low) / 2);
          if (tmp == 0) {
            tmp = 1;
          }
          var mid = tmp + low;

          if (isCommonPrefix(mid)) {
            low = mid;
          } else {
            hight = mid - 1;
          }
        }

        return strs[0].substr(0, low);
      };

      console.log(
        longestCommonPrefix(["flower", "flower", "flower", "flower"])
      );
    </script>
  </body>
</html>
